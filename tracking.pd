#N canvas 1 84 1053 682 10;
#X declare -path pdmtl;
#X declare -lib pix_freenect;
#X declare -path abs;
#X declare -path mapping;
#N canvas 647 320 450 300 freenect 0;
#X obj -359 116 gemhead;
#N canvas 530 421 827 305 properties 0;
#X obj 95 235 outlet;
#X obj 3 -6 cnv 15 140 220 empty empty empty 20 12 0 14 -204800 -66577
0;
#X msg 8 178 led \$1;
#X obj 8 59 vradio 15 1 0 6 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X floatatom 8 155 5 0 0 0 - - -;
#X msg 85 178 angle \$1;
#X obj 85 23 vsl 15 128 -30 30 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X floatatom 85 159 5 0 0 0 - - -;
#X msg 85 -2 0;
#X text 24 73 GREEN;
#X text 25 57 OFF;
#X text 24 89 RED;
#X text 24 104 YELLOW;
#X text 24 119 BLINK_GR;
#X text 24 133 BLINK_R_Y;
#X obj 149 84 cnv 15 320 120 empty empty empty 20 12 0 14 -4034 -66577
0;
#X obj 160 121 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 160 156 5 0 0 0 - - -;
#X obj 225 122 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 225 157 5 0 0 0 - - -;
#X msg 287 179 audio \$1;
#X obj 287 123 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 287 158 5 0 0 0 - - -;
#X msg 160 177 rgb \$1;
#X msg 225 178 depth \$1;
#X text 152 84 activate/deactivate streams;
#X text 306 120 OFF;
#X text 306 134 ON;
#X text 154 98 save cpu power by just activating necessary streams!
;
#X obj 477 85 cnv 15 315 120 empty empty empty 20 12 0 14 -232576 -66577
0;
#X obj 480 94 vradio 15 1 0 4 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X floatatom 480 159 5 0 0 0 - - -;
#X msg 480 179 depth_output \$1;
#X text 500 92 Color -> best for visual representation;
#X text 630 148 b = 0 \, a = 0;
#X text 303 -23 properties for pix_freenect;
#X text 498 62 DEPTH OUTPUT;
#X text 171 63 STREAMS;
#X text 26 -25 LED \, ANGLE;
#X text 629 135 r->3 msbits \, g ->8 lsbits;
#X text 501 108 Grayscale -> easy to handle;
#X text 502 138 Raw YUV (2 bytes) |;
#X text 502 123 Raw RGBA -> 11 bit output in r&g channel;
#N canvas 551 499 894 267 libfreenect_modes 0;
#X msg 548 182 video_mode \$1;
#X obj 548 51 vradio 15 1 0 7 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X floatatom 548 161 5 0 0 0 - - -;
#X msg 150 178 depth_mode \$1;
#X obj 150 50 vradio 15 1 0 6 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X floatatom 150 160 5 0 0 0 - - -;
#X text 8 2 LIBFREENECT MODES:;
#X text 569 80 IR MODE;
#X text 569 51 RGB (use this);
#X obj 150 213 outlet;
#X text 125 2 this is just for experimenting...;
#X text 434 50 FREENECT_VIDEO_RGB;
#X text 422 65 FREENECT_VIDEO_BAYER;
#X text 404 79 FREENECT_VIDEO_IR_10BIT;
#X text 364 94 FREENECT_VIDEO_IR_10BIT_PACKED;
#X text 411 111 FREENECT_VIDEO_YUV_RGB;
#X text 411 125 FREENECT_VIDEO_YUV_RAW;
#X text 423 140 FREENECT_VIDEO_DUMMY;
#X text 24 48 FREENECT_DEPTH_11BIT;
#X text 24 63 FREENECT_DEPTH_10BIT;
#X text -19 78 FREENECT_DEPTH_11BIT_PACKED;
#X text -19 94 FREENECT_DEPTH_10BIT_PACKED;
#X text 42 123 FREENECT_DEPTH_MM;
#X text 67 27 DEPTH MODES;
#X text 530 26 RGB MODES;
#X text 149 27 !!also check depth_output!!;
#X obj 668 114 vradio 15 1 0 3 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 668 164 5 0 0 0 - - -;
#X msg 668 185 resolution \$1;
#X text 688 128 MEDIUM (default);
#X text 665 91 RGB RESOLUTION;
#X text 688 143 HIGH (restart rgb stream!);
#X text -6 109 FREENECT_DEPTH_REGISTERED;
#X text 688 113 LOW (not displaying correctly);
#X text 172 108 aligned to rgb \, 16 bit [mm] output;
#X text 171 122 unaligned \, 16 bit [mm] output;
#X text 170 47 raw 11 bit depth output;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 9 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 28 0 9 0;
#X restore 323 220 pd libfreenect_modes;
#X text 459 220 <- change between raw or mm output \, aligned depth
output \, resolution \, ...;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 8 0 6 0;
#X connect 16 0 17 0;
#X connect 17 0 23 0;
#X connect 18 0 19 0;
#X connect 19 0 24 0;
#X connect 20 0 0 0;
#X connect 21 0 22 0;
#X connect 22 0 20 0;
#X connect 23 0 0 0;
#X connect 24 0 0 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 0 0;
#X connect 43 0 0 0;
#X restore -451 104 pd properties;
#X obj -242 104 gemhead;
#X text -523 150 output acceleration;
#X msg -524 131 accel;
#X obj -524 83 tgl 15 0 empty empty accel 17 7 0 10 -262144 -1 -1 0
1;
#X obj -524 105 metro 500;
#X text -360 97 gemhead for rgb;
#X text -245 84 and for depth;
#X msg -371 75 bang;
#N canvas 1 95 529 247 audio 0;
#X obj 58 -8 list length;
#X obj 58 12 print rcvd_samples;
#X obj 58 -60 inlet;
#X obj 108 -60 inlet;
#X obj 158 -60 inlet;
#X obj 208 -60 inlet;
#X text 403 -99 to be implemented:;
#X text 32 99 1 on the left side \, 3 on the right side under the grill
;
#X text 29 85 microphones are facing downwards;
#X text 404 -83 resampling in pd;
#X text 254 -20 1: left side mic;
#X text 256 -4 2: right side 1st;
#X text 264 26 4: right side 3rd (right outside);
#X text 259 11 3: right side 2nd;
#X text 49 -105 bang to first inlet outputs a list of samples;
#X text 49 -90 received since last |bang (;
#X text 256 -60 list (float) (float) (float) .......;
#X text 47 114 kinect is running at about 16kHz samplerate;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X restore -315 180 pd audio;
#X text -332 72 audio output;
#N canvas 176 428 455 231 acceleration 0;
#X obj 71 34 inlet;
#X obj 71 56 route accel tilt_angle;
#X floatatom 135 87 5 0 0 0 - - -;
#X obj 71 131 unpack 0 0 0;
#X floatatom 51 154 8 0 0 0 - - -;
#X floatatom 105 154 8 0 0 0 - - -;
#X floatatom 160 154 8 0 0 0 - - -;
#X text 68 3 accel message to first inlet outputs accelerator data
at last outlet;
#X text 218 152 accelerometer data for X \, Y \, Z -axis;
#X text 172 87 Raw tilt motor angle encoder information;
#X obj 17 183 expr sqrt($f1*$f1+$f2*$f2+$f3*$f3);
#X floatatom 17 203 5 0 0 0 - - -;
#X text 53 202 gravity acceleration should be 9.81;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 10 0;
#X connect 1 1 2 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 3 2 6 0;
#X connect 10 0 11 0;
#X restore -242 178 pd acceleration;
#N canvas 0 22 364 224 init_trick 0;
#X obj 131 39 route 1;
#X obj 131 9 route gem_state;
#X obj 131 69 delay 500;
#X msg 131 103 accel;
#X obj 91 133 outlet;
#X obj 91 -15 inlet;
#X text 22 179 trigger the accelerometer output to start streaming
;
#X text 24 162 a little trick to start the streams;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 1 0;
#X connect 5 0 4 0;
#X restore -359 136 pd init_trick;
#X obj -359 157 pix_freenect 0 1 1 0;
#X msg -440 177 info;
#X obj -383 210 outlet;
#X connect 0 0 13 0;
#X connect 1 0 14 0;
#X connect 2 0 14 1;
#X connect 4 0 14 0;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 9 0 14 0;
#X connect 13 0 14 0;
#X connect 14 1 16 0;
#X connect 14 2 10 0;
#X connect 14 3 10 1;
#X connect 14 4 10 2;
#X connect 14 5 10 3;
#X connect 14 6 12 0;
#X connect 15 0 14 0;
#X restore 738 246 pd freenect;
#X text 847 166 distance;
#X obj 790 145 hsl 128 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 112 157 declare -path pdmtl;
#X obj 111 179 import pix_freenect;
#X obj 112 129 declare -path abs;
#X obj 279 72 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 426 76 loadbang;
#X obj 117 107 declare -path mapping;
#X obj 106 460;
#X obj 419 157 bng 15 250 50 0 save empty empty 17 7 0 10 -262144 -1
-1;
#X msg 387 51 dimen 1024 768 offset 800 0 border 0;
#X obj 291 124 gems.win @dimen 640 480 @offset 200 0;
#X msg 426 96 dimen 1024 968 \, offset 1366 0 \, border 0;
#X floatatom 168 462 5 0 0 0 - - -;
#X obj 72 514 pix_opencv_bgsubstract;
#X msg 111 429 set;
#X text 147 429 set the background;
#X text 205 461 threshold (default 13);
#X floatatom 189 624 5 0 0 0 - - -;
#X obj 72 656 pix_opencv_contours_boundingrect;
#X floatatom 188 1163 5 0 0 0 - - -;
#X floatatom 223 1163 5 0 0 0 - - -;
#X floatatom 305 691 5 0 0 0 - - -;
#X text 343 692 number of contours;
#X msg 170 547 nightmode \$1;
#X obj 260 548 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 249 569 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 262 591 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X msg 189 568 draw \$1;
#X msg 204 589 show \$1;
#X obj 68 814 pix_texture;
#N canvas 1 144 450 300 particle 0;
#N canvas 556 94 781 672 particle 0;
#X obj 303 130 part_color;
#X obj 303 157 part_size 0.4;
#X obj 303 53 inlet;
#X obj 304 411 part_render;
#X obj 139 116 gemmouse 8 8;
#X msg 127 247 \$1 \$2 0;
#X obj 127 220 pack f f;
#X obj 127 170 - 4;
#X obj 158 171 - 4;
#X obj 158 193 * -1;
#X obj 303 182 part_targetcolor 0 0 0 0 0.2;
#X msg 452 261 -20;
#X msg 400 285 0 0 \$1;
#X msg 453 286 1;
#X obj 304 365 part_orbitpoint 0 1 0 0.08;
#X obj 303 206 part_velocity sphere 0 0 0 0.3;
#X obj 485 259 r particleHide;
#X obj 486 285 r particleShow;
#X obj 184 52 r particleMode;
#X obj 304 76 alpha;
#X msg 444 97 1 0.5 0.2;
#X obj 400 70 loadbang;
#X obj 304 434 circle 0.3;
#X obj 270 234 gate 2;
#X obj 129 282 part_source 12;
#X obj 303 99 part_head;
#N canvas 0 22 204 258 audioEnv 0;
#X obj 27 23 adc~;
#X obj 27 70 env~;
#X obj 27 105 - 20;
#X obj 27 164 t b;
#X obj 72 163 t b;
#X obj 27 130 moses 20;
#X obj 26 187 s particleHide;
#X obj 72 211 s particleShow;
#X connect 0 0 1 0;
#X connect 0 1 1 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 6 0;
#X connect 4 0 7 0;
#X connect 5 0 3 0;
#X connect 5 1 4 0;
#X restore 451 236 pd audioEnv;
#X obj 306 470 outlet;
#X obj 304 388 part_killold 50;
#X obj 302 284 part_source 1;
#X msg 400 98 1 0 0;
#X obj 252 136 loadbang;
#X obj 122 75 inlet;
#X obj 120 99 unpack f f;
#X floatatom 93 338 5 0 0 0 - - -;
#X floatatom 64 249 5 0 0 0 - - -;
#X msg 259 184 1;
#X obj 265 536 text3d;
#X msg 331 548 text distopia;
#X connect 0 0 1 0;
#X connect 1 0 10 0;
#X connect 2 0 19 0;
#X connect 3 0 22 0;
#X connect 5 0 24 3;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 7 0 35 0;
#X connect 8 0 9 0;
#X connect 9 0 6 1;
#X connect 9 0 34 0;
#X connect 10 0 15 0;
#X connect 11 0 12 0;
#X connect 12 0 29 3;
#X connect 13 0 12 0;
#X connect 14 0 28 0;
#X connect 15 0 23 1;
#X connect 16 0 11 0;
#X connect 17 0 13 0;
#X connect 18 0 23 0;
#X connect 19 0 25 0;
#X connect 20 0 0 2;
#X connect 21 0 20 0;
#X connect 21 0 30 0;
#X connect 22 0 27 0;
#X connect 22 0 37 0;
#X connect 23 0 24 0;
#X connect 23 1 29 0;
#X connect 24 0 14 0;
#X connect 25 0 0 0;
#X connect 28 0 3 0;
#X connect 29 0 14 0;
#X connect 30 0 0 1;
#X connect 31 0 36 0;
#X connect 32 0 33 0;
#X connect 33 0 7 0;
#X connect 33 1 8 0;
#X connect 36 0 23 0;
#X connect 38 0 37 0;
#X restore 111 118 pd particle;
#X obj 113 56 GLSL/bloom;
#X obj 205 78 hsl 128 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 115 -61 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 113 -14 gemhead 66;
#X obj 108 92 inlet;
#X obj 254 15 inlet;
#X obj 304 -2 metro;
#X obj 39 17 alpha;
#X obj 43 36 colorRGB 1 1 1;
#X floatatom 162 14 5 0 0 0 - - -;
#X connect 2 0 1 1;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 0 0;
#X connect 6 0 3 0;
#X connect 8 0 9 0;
#X connect 9 0 0 1;
#X connect 10 0 9 4;
#X restore 243 1350 pd particle;
#X obj 460 523 loadbang;
#X obj 79 772 spigot 0;
#X obj 135 738 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 243 1325 pack f f;
#X floatatom 449 623 5 0 0 0 - - -;
#X msg 361 620 ftolerance \$1;
#X floatatom 176 1321 5 0 0 0 - - -;
#X floatatom 355 1332 5 0 0 0 - - -;
#X obj 20 466 pix_separator;
#X obj 144 685 route 111;
#X obj 614 578 pix_texture;
#X obj 740 358 separator;
#X obj 739 329 pix_separator;
#X obj 609 489 separator;
#X obj 609 460 pix_separator;
#X obj 741 384 translateXYZ 2 0 0;
#X obj 974 408 pix_duotone 1;
#X obj 740 444 pix_opencv_edge;
#X floatatom 849 448 5 0 0 0 - - -;
#X obj 749 691 separator;
#X obj 747 475 pix_separator;
#X obj 68 833 square 2;
#X obj 632 534 translateXYZ -4 0 0;
#X obj 742 726 translateXYZ 0 0 0;
#X obj 850 403 loadbang;
#X msg 863 428 18;
#X obj 499 727 print;
#X obj 175 1009 sel -1;
#X obj 187 943 unpack 0 0 0 0 0;
#X obj 222 1014 sel -1;
#X obj 254 1088 f;
#X obj 288 1087 f;
#X obj 198 1040 t f b b;
#X obj 200 1117 pack f f f f;
#X obj 465 543 f 1500;
#X obj 183 1185 smoother;
#X obj 244 1185 smoother;
#X obj 201 1137 unpack 0 0 0 0;
#X obj 615 606 square 5;
#X obj 197 1284 autoscale 0 8;
#X obj 295 1291 autoscale 0 6;
#N canvas 1 184 450 300 screens 0;
#X obj 226 185 screen 1;
#X obj 204 125 screen 2;
#X restore 500 364 pd screens;
#X obj 869 550 pix_duotone;
#X obj 980 494;
#X msg 455 270;
#X obj 429 244 gemwin;
#X msg 427 211 create \, 1;
#X msg 510 203 destroy;
#X msg 471 179 dimen 1024 800 \, offset 1366 0 \, border 0;
#X floatatom 128 1255 5 0 0 0 - - -;
#X floatatom 293 1226 5 0 0 0 - - -;
#X obj 510 1217 netsend;
#X msg 541 1168 connect localhost 8888;
#X msg 467 1176 send X \$1;
#X msg 465 1139 send Y \$1;
#X msg 517 245 dimen 320 240 \, border 1;
#X connect 0 0 45 0;
#X connect 6 0 12 0;
#X connect 7 0 13 0;
#X connect 11 0 12 1;
#X connect 13 0 12 1;
#X connect 14 0 15 1;
#X connect 15 0 20 0;
#X connect 16 0 15 0;
#X connect 19 0 20 1;
#X connect 20 0 34 0;
#X connect 20 1 42 0;
#X connect 20 2 23 0;
#X connect 21 0 68 0;
#X connect 22 0 69 0;
#X connect 23 0 32 1;
#X connect 25 0 20 0;
#X connect 26 0 25 0;
#X connect 27 0 29 0;
#X connect 28 0 30 0;
#X connect 29 0 20 0;
#X connect 30 0 20 0;
#X connect 31 0 54 0;
#X connect 33 0 28 0;
#X connect 33 0 27 0;
#X connect 33 0 26 0;
#X connect 33 0 67 0;
#X connect 34 0 31 0;
#X connect 35 0 34 1;
#X connect 36 0 32 0;
#X connect 37 0 38 0;
#X connect 38 0 20 0;
#X connect 41 0 15 0;
#X connect 42 1 61 0;
#X connect 43 0 71 0;
#X connect 44 0 48 0;
#X connect 45 0 44 0;
#X connect 46 0 55 0;
#X connect 47 0 46 0;
#X connect 48 0 50 0;
#X connect 50 0 53 0;
#X connect 50 0 47 0;
#X connect 51 0 50 1;
#X connect 52 0 56 0;
#X connect 53 0 52 0;
#X connect 56 0 15 0;
#X connect 57 0 58 0;
#X connect 58 0 51 0;
#X connect 60 1 65 0;
#X connect 61 1 60 0;
#X connect 61 2 62 0;
#X connect 61 3 63 1;
#X connect 61 4 64 1;
#X connect 62 1 66 1;
#X connect 63 0 66 2;
#X connect 64 0 66 3;
#X connect 65 0 66 0;
#X connect 65 1 63 0;
#X connect 65 2 64 0;
#X connect 66 0 70 0;
#X connect 67 0 19 0;
#X connect 68 0 72 0;
#X connect 68 0 82 0;
#X connect 69 0 73 0;
#X connect 69 0 83 0;
#X connect 70 0 21 0;
#X connect 70 1 22 0;
#X connect 72 0 36 0;
#X connect 72 0 39 0;
#X connect 73 0 36 1;
#X connect 73 0 40 0;
#X connect 79 0 78 0;
#X connect 80 0 78 0;
#X connect 81 0 78 0;
#X connect 82 0 86 0;
#X connect 83 0 87 0;
#X connect 85 0 84 0;
#X connect 86 0 84 0;
#X connect 87 0 84 0;
#X connect 88 0 78 0;
